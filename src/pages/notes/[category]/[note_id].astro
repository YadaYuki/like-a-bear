---
import Layout from "~/components/layouts/Layout.astro";
import TitleSection from "~/components/note-detail/TitleSection.astro";
import TwitterShareButton from "~/components/note-detail/TwitterShareButton.astro";
import { getCollection, CollectionEntry } from "astro:content";

// TODO: Recommend Items

type Props = {
  note: CollectionEntry<"notes">;
};

export async function getStaticPaths() {
  const noteEntries = await getCollection("notes");
  return noteEntries.map((note) => {
    return {
      params: { note_id: note.slug, category: note.data.category },
      props: { note },
    };
  });
}
const { note } = Astro.props;
const { Content } = await note.render();
---

<Layout page={"notes"}>
  <TitleSection noteItem={note.data} />
  <TwitterShareButton />
  <div class="note_content_wrapper">
    <Content />
  </div>
</Layout>

<style is:global>
  @media screen and (max-width: 768px) {
    main {
      margin: 0 !important;
    }
  }
  @media screen and (min-width: 768px) {
    .note_content_wrapper {
      border-radius: 4px;
    }
  }

  .note_content_wrapper {
    background-color: #fff;
    margin: 20px 0;
    padding: 8px 16px;
    font-family: "Noto Sans JP", sans-serif;
  }
  .note_content_wrapper h1 {
    margin: 0;
  }
  .note_content_wrapper h1::after,
  .note_content_wrapper h2::after {
    height: 1px;
    display: block;
    content: " ";
    background: #f2f2f2;
    margin-top: 8px;
  }
  .note_content_wrapper p {
    line-height: 1.8em;
  }

  .note_content_wrapper li {
    line-height: 1.8em;
  }

  .note_content_wrapper img {
    width: 100%;
  }
  .note_content_wrapper pre.astro-code {
    padding: 1rem;
    border-radius: 0.375rem;
  }
</style>
